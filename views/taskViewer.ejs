<html>
    <head>
        <link rel="icon" href="../assets/favicon.png">
        <title>Task 1</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    </head>
    <body onload="dUpdate()" class="bg-dark text-light">
        <!--Navbar-->
        <nav class="navbar navbar-light bg-secondary container-fluid">
            <a class="navbar-brand text-light" href="/">
                <i class="bi bi-house text-light"></i> Projects
            </a>
            <form class="navbar-brand text-light" method="POST" action="/logout">
                <button class="btn btn-outline-danger float-end" type="submit"> logout </button>
            </form>
        </nav>
        <div class='container'>
            <h1 class='display-1 mt-4'><%- tDesc %> </h1>
            <hr>
            <p> Item is due:<%- tDates%></p>
            <label>Insert link:</label>
            <p><%-deliverable%></p>
            <div id="postDeliverable">
            
            </div>
        </div>
        <!--  Bootstrap Bundle with Popper -->
        <script>
            function dUpdate(){ 
            let manager = <%- manager%>;
            let tUser = <%- tUser %>;
            let adders = <%- adders%>;
            console.log(adders);
            if(tUser === manager){
                console.log('You are the manager');
            let body = `<form action="/deliverable/<%-projectId%>/<%- taskId%>" method="POST">
            <input class="form-control"  id="deliver" name="deliverable" placeholder="deliverable"> </input>
            <button class="btn btn-primary float-end" type="submit"> Submit </button>
            </form>
            <form action="/addUser/<%-projectId%>/<%-taskId%>" method="POST">
            <input class="form-control"  id="addUser" name="addUser" placeholder="Add a user"> </input>
            <button class="btn btn-primary float-end" type="submit"> add a user </button>
            </form>`
            document.getElementById("postDeliverable").innerHTML=body;
            }
            else if(adders.includes(<%-tUser%>)){
                let body = `<form action="/deliverable/<%-projectId%>/<%- taskId%>" method="POST">
            <input class="form-control"  id="deliver" name="deliverable" placeholder="deliverable"> </input>
            <button class="btn btn-primary float-end" type="submit"> Submit </button>
            </form>`
            document.getElementById("postDeliverable").innerHTML=body;
            }
        }
        </script>
    </body>
</html>